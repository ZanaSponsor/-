<!DOCTYPE html>
<html dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zana Adam - Checkout System</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        :root { --p: #1e3a8a; --s: #3b82f6; --a: #f43f5e; --bg: #f8fafc; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--bg); margin: 0; padding: 20px; }
        .main-container { max-width: 1000px; margin: auto; display: grid; grid-template-columns: 1fr 400px; gap: 20px; }
        .card { background: white; border-radius: 15px; padding: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .header { grid-column: 1/-1; text-align: center; padding: 20px; background: var(--p); color: white; border-radius: 15px; margin-bottom: 10px; }
        
        /* Product Selection */
        .search-area { margin-bottom: 20px; }
        input, select { width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 10px; margin-top: 8px; font-size: 16px; }
        .qty-box { display: flex; gap: 10px; margin-top: 15px; align-items: center; }
        .btn-add { background: var(--s); color: white; border: none; padding: 12px 25px; border-radius: 10px; cursor: pointer; font-weight: bold; flex: 1; }

        /* Shopping Cart */
        .cart-item { display: flex; justify-content: space-between; align-items: center; padding: 10px; border-bottom: 1px solid #f1f5f9; background: #fff; margin-bottom: 5px; border-radius: 8px; }
        .cart-item-info { flex: 1; }
        .cart-item-qty { background: #eff6ff; padding: 2px 8px; border-radius: 5px; font-weight: bold; color: var(--s); margin: 0 5px; }
        .remove-btn { color: #ef4444; cursor: pointer; font-weight: bold; background: none; border: none; }

        /* Checkout Section */
        .checkout-card { position: sticky; top: 20px; border: 2px solid var(--s); }
        .total-row { display: flex; justify-content: space-between; font-size: 22px; font-weight: 800; margin: 20px 0; color: var(--a); border-top: 2px dashed #eee; padding-top: 15px; }
        .btn-checkout { background: #22c55e; color: white; border: none; padding: 18px; width: 100%; border-radius: 12px; font-size: 18px; font-weight: bold; cursor: pointer; }
        
        #receipt-area { display: none; background: white; padding: 40px; border-radius: 10px; }
        @media (max-width: 850px) { .main-container { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

<div class="main-container">
    <div class="header">
        <h1 style="margin:0;">Ø³ÛŒØ³ØªÛ•Ù…ÛŒ ÙØ±Û†Ø´ØªÙ†ÛŒ Ø²Ø§Ù†Ø§ Ø¦Ø§Ø¯Û•Ù…</h1>
        <p style="margin:5px 0; opacity: 0.8;">Ù‡Û•Ù…ÙˆÙˆ Ù…Û†Ø¯ÛÙ„Û•Ú©Ø§Ù†ÛŒ Ø´Ø§Ø´Û• + Ù¡Ù ,Ù Ù Ù  Ø¯ÛŒÙ†Ø§Ø± Ù‚Ø§Ø²Ø§Ù†Ø¬</p>
    </div>

    <div class="card">
        <div class="search-area">
            <label>ğŸ‘¤ Ù†Ø§ÙˆÛŒ Ú©Ú•ÛŒØ§Ø±</label>
            <input type="text" id="custName" placeholder="Ù†Ø§ÙˆÛŒ Ú©Ú•ÛŒØ§Ø± Ù„ÛØ±Û• Ø¨Ù†ÙˆÙˆØ³Û•...">
            
            <label style="margin-top:20px; display:block;">ğŸ” Ú¯Û•Ú•Ø§Ù† Ø¨Û† Ù…Û†Ø¯ÛÙ„ÛŒ Ø´Ø§Ø´Û•</label>
            <input type="text" id="searchInput" placeholder="Ù†Ø§ÙˆÛŒ Ù…Û†Ø¯ÛÙ„ Ø¨Ù†ÙˆÙˆØ³Û•..." oninput="filterItems()">
            <select id="itemSelect" size="10"></select>
            
            <div class="qty-box">
                <div style="flex: 1;">
                    <label>ğŸ”¢ Ø¨Ú• (Ø¯Ø§Ù†Û•)</label>
                    <input type="number" id="itemQty" value="1" min="1">
                </div>
                <button class="btn-add" onclick="addToCart()" style="margin-top: 28px;">â• Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù† Ø¨Û† Ø³Û•Ø¨Û•ØªÛ•</button>
            </div>
        </div>
    </div>

    <div class="card checkout-card">
        <h3 style="margin-top:0; border-bottom: 2px solid #f1f5f9; padding-bottom: 10px;">ğŸ›’ Ø³Û•Ø¨Û•ØªÛ•ÛŒ Ú©Ú•ÛŒÙ†</h3>
        <div id="cart-display">
            <p style="text-align:center; color:#94a3b8;">Ù‡ÛŒÚ† Ú©Ø§ÚµØ§ÛŒÛ•Ú© Ù†ÛŒÛŒÛ•</p>
        </div>
        
        <div class="total-row">
            <span>Ú©Û†ÛŒ Ú¯Ø´ØªÛŒ:</span>
            <span><span id="totalPrice">0</span> Ø¯.Ú©</span>
        </div>
        
        <button class="btn-checkout" onclick="processCheckout()">ğŸ’³ ØªÛ•ÙˆØ§ÙˆÚ©Ø±Ø¯Ù†ÛŒ Ú©Ú•ÛŒÙ† (Checkout)</button>
    </div>
</div>

<div id="receipt-area">
    <div style="text-align:center; border-bottom: 2px solid #000; padding-bottom: 20px;">
        <h2>Ú©Û†Ú¯Ø§ÛŒ Ø²Ø§Ù†Ø§ Ø¦Ø§Ø¯Û•Ù…</h2>
        <p id="r-cust"></p>
        <p id="r-date"></p>
    </div>
    <div id="r-items" style="margin-top: 20px;"></div>
    <div style="text-align:center; margin-top: 30px; font-size: 24px; font-weight: bold;">
        Ú©Û†ÛŒ Ú¯Ø´ØªÛŒ: <span id="r-total"></span> Ø¯ÛŒÙ†Ø§Ø±
    </div>
</div>

<script>
    // Ù„ÛŒØ³ØªÛŒ Ù…Û†Ø¯ÛÙ„Û•Ú©Ø§Ù† Ùˆ Ù†Ø±Ø®Û•Ú©Ø§Ù† (Ù†Ø±Ø® + 10,000)
    const products = {
        "iPhone 6G STANDARD ZY": 19000, "iPhone 6S STANDARD ZY": 20000, "iPhone 7G STANDARD ZY": 20000,
        "iPhone 8G STANDARD ZY": 20000, "iPhone 6P STANDARD ZY": 21000, "iPhone 6SP STANDARD ZY": 22000,
        "iPhone 7P STANDARD ZY": 21000, "iPhone 8P STANDARD ZY": 21000, "iPhone XR ZY HD+": 24000,
        "iPhone X ZY HD+": 24000, "iPhone 11 ZY FULL HD": 28000, "iPhone 12 PRO DD OLED": 52000,
        "iPhone 13 ZY FULL HD": 36000, "iPhone 14 PRO GX OLED": 112000, "iPhone 15 PRO MAX OLED": 108000,
        "iPhone 16 PRO MAX ZY": 106000
    };

    let cart = [];

    function filterItems() {
        const input = document.getElementById('searchInput').value.toLowerCase();
        const select = document.getElementById('itemSelect');
        select.innerHTML = "";
        for (let name in products) {
            if (name.toLowerCase().includes(input)) {
                let opt = document.createElement('option');
                opt.value = name;
                opt.text = `${name} - (${products[name].toLocaleString()} Ø¯.Ú©)`;
                select.appendChild(opt);
            }
        }
    }

    function addToCart() {
        const name = document.getElementById('itemSelect').value;
        const qty = parseInt(document.getElementById('itemQty').value);
        if(!name) return alert("ØªÚ©Ø§ÛŒÛ• Ù…Û†Ø¯ÛÙ„ÛÚ© Ù‡Û•ÚµØ¨Ú˜ÛØ±Û•!");
        
        const existing = cart.find(i => i.name === name);
        if(existing) {
            existing.qty += qty;
        } else {
            cart.push({ name: name, price: products[name], qty: qty });
        }
        updateCartUI();
    }

    function updateCartUI() {
        const display = document.getElementById('cart-display');
        display.innerHTML = "";
        let total = 0;
        cart.forEach((item, index) => {
            const itemTotal = item.price * item.qty;
            total += itemTotal;
            display.innerHTML += `
                <div class="cart-item">
                    <div class="cart-item-info">
                        <div>${item.name}</div>
                        <small>${item.price.toLocaleString()} Ã— <span class="cart-item-qty">${item.qty}</span></small>
                    </div>
                    <div style="font-weight:bold; margin-left:10px;">${itemTotal.toLocaleString()}</div>
                    <button class="remove-btn" onclick="removeItem(${index})">âœ•</button>
                </div>`;
        });
        document.getElementById('totalPrice').innerText = total.toLocaleString();
    }

    function removeItem(index) {
        cart.splice(index, 1);
        updateCartUI();
    }

    function processCheckout() {
        const cust = document.getElementById('custName').value;
        if(!cust) return alert("Ù†Ø§ÙˆÛŒ Ú©Ú•ÛŒØ§Ø± Ø¨Ù†ÙˆÙˆØ³Û• Ø¨Û† ØªÛ•ÙˆØ§ÙˆÚ©Ø±Ø¯Ù†ÛŒ ÙˆÛ•Ø³ÚµÛ•Ú©Û•!");
        if(cart.length === 0) return alert("Ø³Û•Ø¨Û•ØªÛ•Ú©Û• Ø®Ø§ÚµÛŒÛŒÛ•!");

        // Ø¦Ø§Ù…Ø§Ø¯Û•Ú©Ø±Ø¯Ù†ÛŒ ÙˆÛ•Ø³Úµ Ø¨Û† Ú†Ø§Ù¾
        document.getElementById('r-cust').innerText = "Ú©Ú•ÛŒØ§Ø±: " + cust;
        document.getElementById('r-date').innerText = "Ø¨Û•Ø±ÙˆØ§Ø±: " + new Date().toLocaleDateString('ku-IQ');
        let itemsHtml = "";
        cart.forEach(item => {
            itemsHtml += `<div style="display:flex; justify-content:space-between; padding:10px; border-bottom:1px solid #eee;">
                <span>${item.name} (${item.qty} Ø¯Ø§Ù†Û•)</span>
                <span>${(item.price * item.qty).toLocaleString()} Ø¯ÛŒÙ†Ø§Ø±</span>
            </div>`;
        });
        document.getElementById('r-items').innerHTML = itemsHtml;
        document.getElementById('r-total').innerText = document.getElementById('totalPrice').innerText;

        // Ø¯Ø±ÙˆØ³ØªÚ©Ø±Ø¯Ù†ÛŒ PDF Ùˆ Ù†Ø§Ø±Ø¯Ù†
        const element = document.getElementById('receipt-area');
        element.style.display = 'block';
        html2pdf().from(element).save(`Zana-Adam-Invoice.pdf`).then(() => {
            element.style.display = 'none';
        });

        let msg = `*ÙˆÛ•Ø³ÚµÛŒ Ù†ÙˆÛ - Ø²Ø§Ù†Ø§ Ø¦Ø§Ø¯Û•Ù…*%0AÚ©Ú•ÛŒØ§Ø±: ${cust}%0AÚ©Û†ÛŒ Ú¯Ø´ØªÛŒ: ${document.getElementById('totalPrice').innerText} Ø¯ÛŒÙ†Ø§Ø±.`;
        window.open(`https://wa.me/9647501234567?text=${msg}`, '_blank');
    }

    filterItems();
</script>

</body>
</html>
