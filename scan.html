async function login() {
    const p = document.getElementById('lPhone').value;
    const ps = document.getElementById('lPass').value;

    if(!p || !ps) return alert("تكایە خانەكان پڕ بكەرەوە");

    // ١. چوونەژوورەوەی ئادمین (ئۆفلاین کار دەکات بۆ ئەوەی هەمیشە بتوانیت بچیتە ژوورەوە)
    if(p === '07510074008' && ps === '112233') {
        loggedUser = { phone: p, isAdmin: true, name: 'Zana Admin' };
        localStorage.setItem('zana_v7_user', JSON.stringify(loggedUser));
        location.reload();
        return;
    }

    // ٢. چوونەژوورەوەی بەكارهێنەر لە ڕێگەی فایەربەیسەوە
    try {
        const res = await fetch(`${FB_URL}/users/${p}.json`);
        const user = await res.json();

        if(user && user.pass === ps) {
            loggedUser = { phone: p, isAdmin: false, name: user.name };
            localStorage.setItem('zana_v7_user', JSON.stringify(loggedUser));
            location.reload();
        } else {
            alert("ئەم ژمارەیە تۆمار نەکراوە یان پاسۆرد هەڵەیە!");
        }
    } catch (error) {
        alert("کێشەی ئینتەرنێت یان داتابەیس هەیە. دڵنیابەرەوە لە Rules ی فایەربەیس.");
    }
}
