<!DOCTYPE html>
<html dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zana Store - Direct Payment</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        :root { --p: #1e3a8a; --accent: #ff0050; --s: #22c55e; --bg: #f3f4f6; --fastpay: #e31e24; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--bg); margin: 0; display: flex; justify-content: center; min-height: 100vh; }
        .container { width: 100%; max-width: 1100px; padding: 15px; }
        .card { background: white; padding: 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); margin-bottom: 20px; }
        
        /* Product UI */
        .product-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 10px; }
        .product-item { background: #fff; border: 2px solid #f3f4f6; padding: 15px; border-radius: 15px; text-align: center; cursor: pointer; }
        .product-item:hover { border-color: var(--accent); }
        .product-item b { display: block; color: var(--accent); }

        /* Payment Modal Overlay */
        #payment-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; justify-content: center; align-items: center; }
        .modal-content { background: white; padding: 30px; border-radius: 20px; width: 90%; max-width: 400px; text-align: center; }

        .btn-pay { width: 100%; padding: 15px; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; margin-top: 10px; font-size: 16px; }
        .fastpay-btn { background: var(--fastpay); color: white; }
        
        #main-ui { display: none; grid-template-columns: 1fr 380px; gap: 20px; }
        @media (max-width: 850px) { #main-ui { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

<div class="container">
    <div id="auth-box" class="card" style="max-width:400px; margin:auto; text-align:center;">
        <h2>Ø¨Û•Ø®ÛŽØ±Ø¨ÛŽÛŒØª Ø¨Û† ZANA STORE</h2>
        <input type="text" id="uName" placeholder="Ù†Ø§ÙˆÛŒ ØªÛ•ÙˆØ§Ùˆ" style="width:100%; padding:12px; margin:10px 0; border-radius:10px; border:1px solid #ccc;">
        <button onclick="login()" class="btn-pay" style="background:var(--p); color:white;">Ú†ÙˆÙˆÙ†Û• Ú˜ÙˆÙˆØ±Û•ÙˆÛ•</button>
    </div>

    <div id="main-ui">
        <div class="card" style="grid-column: 1/-1; background:var(--p); color:white; display:flex; justify-content:space-between; align-items:center;">
            <h2 style="margin:0;">ZANA ONLINE STORE</h2>
            <span id="welcome"></span>
        </div>

        <div class="card">
            <h3>ðŸŽ®UC & Coins Ù‡Û•ÚµØ¨Ú˜ÛŽØ±Û•</h3>
            <div class="product-grid">
                <div class="product-item" onclick="addToCart('60 UC', 1500)">60 UC<b>1,500 Ø¯.Ú©</b></div>
                <div class="product-item" onclick="addToCart('325 UC', 7250)">325 UC<b>7,250 Ø¯.Ú©</b></div>
                <div class="product-item" onclick="addToCart('1000 Coins', 19000)">1000 C<b>19,000 Ø¯.Ú©</b></div>
            </div>
        </div>

        <div class="card">
            <h3>ðŸ›’ Ø³Û•Ø¨Û•ØªÛ•Ú©Û•Øª</h3>
            <div id="cart-list"></div>
            <hr>
            <div style="font-size:22px; font-weight:bold; display:flex; justify-content:space-between;">
                <span>Ú©Û†ÛŒ Ú¯Ø´ØªÛŒ:</span>
                <span id="total">0</span>
            </div>
            <button onclick="openPayment()" class="btn-pay" style="background:var(--s); color:white;">ðŸ’³ Ø¦ÛŽØ³ØªØ§ Ù¾Ø§Ø±Û• Ø¨Ø¯Û•</button>
        </div>
    </div>
</div>

<div id="payment-modal">
    <div class="modal-content">
        <h2 style="color:var(--fastpay);">FastPay Checkout</h2>
        <p>Ø¨Ú•ÛŒ Ù¾Ø§Ø±Û•: <b id="pay-amount">0</b> Ø¯ÛŒÙ†Ø§Ø±</p>
        <div style="background:#f9f9f9; padding:15px; border-radius:10px; margin:15px 0; border:1px dashed #ccc;">
            <small>Ú˜Ù…Ø§Ø±Û•ÛŒ ÙˆÛ•Ø±Ú¯Ø±:</small><br>
            <b style="font-size:20px;">07758887488</b>
        </div>
        <p style="font-size:12px; color:#666;">Ø¯ÙˆØ§ÛŒ Ù†Ø§Ø±Ø¯Ù†ÛŒ Ù¾Ø§Ø±Û•Ú©Û•ØŒ Ú˜Ù…Ø§Ø±Û•ÛŒ ÙˆÛ•Ø³Úµ (TXID) Ù„ÛŽØ±Û• Ø¨Ù†ÙˆÙˆØ³Û•:</p>
        <input type="text" id="txid-input" placeholder="Transaction ID" style="width:100%; padding:12px; margin-bottom:10px; border-radius:8px; border:1px solid #ccc;">
        <button onclick="verifyAndSend()" class="btn-pay fastpay-btn">Ù¾Ø´ØªÚ•Ø§Ø³ØªÚ©Ø±Ø¯Ù†Û•ÙˆÛ• Ùˆ Ù†Ø§Ø±Ø¯Ù†</button>
        <button onclick="closePayment()" style="background:none; border:none; color:gray; cursor:pointer; margin-top:10px;">Ù¾Ø§Ø´Ú¯Û•Ø²Ø¨ÙˆÙˆÙ†Û•ÙˆÛ•</button>
    </div>
</div>

<script>
    let user = "";
    let cart = [];

    function login() {
        user = document.getElementById('uName').value;
        if(!user) return alert("Ù†Ø§Ùˆ Ø¨Ù†ÙˆÙˆØ³Û•");
        document.getElementById('auth-box').style.display = 'none';
        document.getElementById('main-ui').style.display = 'grid';
        document.getElementById('welcome').innerText = "ðŸ‘¤ " + user;
    }

    function addToCart(n, p) {
        cart.push({n, p});
        render();
    }

    function render() {
        const list = document.getElementById('cart-list');
        list.innerHTML = "";
        let t = 0;
        cart.forEach(i => {
            t += i.p;
            list.innerHTML += `<div style="display:flex; justify-content:space-between; padding:5px 0;"><span>${i.n}</span><span>${i.p.toLocaleString()}</span></div>`;
        });
        document.getElementById('total').innerText = t.toLocaleString() + " Ø¯.Ú©";
        document.getElementById('pay-amount').innerText = t.toLocaleString();
    }

    function openPayment() {
        if(cart.length === 0) return alert("Ø³Û•Ø¨Û•ØªÛ• Ø®Ø§ÚµÛŒÛŒÛ•");
        document.getElementById('payment-modal').style.display = 'flex';
    }

    function closePayment() {
        document.getElementById('payment-modal').style.display = 'none';
    }

    function verifyAndSend() {
        const txid = document.getElementById('txid-input').value;
        if(!txid) return alert("ØªÚ©Ø§ÛŒÛ• TXID Ø¨Ù†ÙˆÙˆØ³Û•");

        let msg = `*Ø¯Ø§ÙˆØ§Ú©Ø§Ø±ÛŒ Ù†ÙˆÛŽ (Ù¾Ø§Ø±Û•Ø¯Ø±Ø§Ùˆ)*%0A*Ú©Ú•ÛŒØ§Ø±:* ${user}%0A*Ú©Û†ÛŒ Ú¯Ø´ØªÛŒ:* ${document.getElementById('total').innerText}%0A*ÙˆÛ•Ø³ÚµÛŒ ÙØ§Ø³ØªÙ¾Û•ÛŒ:* ${txid}%0A---%0A`;
        cart.forEach(i => msg += `â€¢ ${i.n}%0A`);
        
        // Ù†Ø§Ø±Ø¯Ù† Ø¨Û† ÙˆØ§ØªØ³Ø¦Ø§Ù¾ ÙˆÛ•Ú© Ø¨Û•ÚµÚ¯Û•
        window.open(`https://wa.me/9647758887488?text=${msg}`, '_blank');
        alert("Ø¯Ø§ÙˆØ§Ú©Ø§Ø±ÛŒÛŒÛ•Ú©Û•Øª Ù†ÛŽØ±Ø¯Ø±Ø§ Ùˆ Ø¨Û•Ù…Ø²ÙˆÙˆØ§Ù†Û• Ú©Ø§Ø±Ø§ Ø¯Û•Ø¨ÛŽØª!");
        location.reload();
    }
</script>
</body>
</html>
