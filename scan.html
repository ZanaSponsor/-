<!DOCTYPE html>
<html dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>سکانەری زیرەکی زانا</title>
    <script src="https://unpkg.com/html5-qrcode"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #f8f9fa; text-align: center; padding: 20px; }
        .container { max-width: 450px; margin: auto; background: white; padding: 20px; border-radius: 20px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); }
        #reader { width: 100%; border-radius: 15px; overflow: hidden; margin-bottom: 20px; }
        .input-group { margin-bottom: 20px; display: flex; gap: 5px; }
        input { flex: 1; padding: 12px; border: 2px solid #ddd; border-radius: 10px; font-size: 16px; text-align: center; }
        button { padding: 12px 20px; background: #28a745; color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; }
        .result-box { margin-top: 20px; padding: 15px; border: 2px solid #28a745; border-radius: 15px; display: none; }
        .product-img { width: 150px; height: 150px; object-fit: contain; margin-bottom: 10px; }
        .price { font-size: 30px; color: #28a745; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h2>سیستەمی سکان و گەڕان</h2>
    
    <div class="input-group">
        <input type="text" id="manualCode" placeholder="بارکۆدەکە لێرە بنووسە...">
        <button onclick="checkManual()">بگەڕێ</button>
    </div>

    <div id="reader"></div>

    <div id="result" class="result-box">
        <img id="item-img" src="" class="product-img">
        <h3 id="item-name"></h3>
        <div id="item-price" class="price"></div>
    </div>
</div>

<script>
    // لیستی کاڵاکان
    const products = {
        "12345678": { name: "Iphone 17 Pro Max", price: "1400 دۆلار", img: "https://ibb.co/GBFQPtM.jpg" },
        "12345678": { name: "Iphone 16 Pro Max", price: "1000 دۆلار", img: "shampoo.jpg" }
    };

    function showProduct(code) {
        const product = products[code];
        const resultDiv = document.getElementById('result');
        
        if (product) {
            document.getElementById('item-name').innerText = product.name;
            document.getElementById('item-price').innerText = product.price;
            document.getElementById('item-img').src = product.img;
            document.getElementById('item-img').style.display = 'block';
            resultDiv.style.display = 'block';
            resultDiv.style.borderColor = '#28a745';
        } else {
            document.getElementById('item-name').innerText = "نەدۆزرایەوە: " + code;
            document.getElementById('item-price').innerText = "ئەم کاڵایە لە لیستەکە نییە";
            document.getElementById('item-img').style.display = 'none';
            resultDiv.style.display = 'block';
            resultDiv.style.borderColor = 'red';
        }
    }

    // گەڕان بە دەست
    function checkManual() {
        const code = document.getElementById('manualCode').value;
        if(code) showProduct(code);
    }

    // سکان بە کامێرا
    function onScanSuccess(decodedText) {
        showProduct(decodedText);
    }

    let html5QrcodeScanner = new Html5QrcodeScanner("reader", { fps: 10, qrbox: 250 });
    html5QrcodeScanner.render(onScanSuccess);
</script>

</body>
</html>
