<!DOCTYPE html>
<html dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³ÛŒØ³ØªÛ•Ù…ÛŒ ÙØ±Û†Ø´ØªÙ†ÛŒ Ø²Ø§Ù†Ø§ + FastPay</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        :root { --primary: #3182ce; --fastpay: #e31e24; --success: #25D366; --bg: #f7fafc; }
        body { font-family: sans-serif; background: var(--bg); padding: 10px; text-align: center; }
        .container { max-width: 500px; margin: auto; background: white; padding: 20px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        
        /* Ø¨Û•Ø´ÛŒ Ú¯Û•Ú•Ø§Ù† */
        .search-box { display: flex; gap: 5px; margin-bottom: 20px; }
        input { flex: 1; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px; }
        .btn-add { background: var(--primary); color: white; border: none; padding: 10px 15px; border-radius: 8px; cursor: pointer; }

        /* Ø´ÛÙˆØ§Ø²ÛŒ ÙˆÛ•Ø³ÚµÛ•Ú©Û• */
        #receipt-area { padding: 15px; border: 1px solid #eee; background: #fff; margin-bottom: 15px; border-radius: 10px; }
        .item-row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #f0f0f0; }
        .total-box { font-size: 24px; font-weight: bold; color: var(--fastpay); margin: 15px 0; padding: 10px; background: #fff5f5; border-radius: 8px; }

        /* Ø¨Û•Ø´ÛŒ ÙØ§Ø³ØªÙ¾Û•ÛŒ */
        .fastpay-card { display: none; margin-top: 20px; padding: 15px; border: 2px solid var(--fastpay); border-radius: 15px; background: #fff; animation: slideUp 0.5s; }
        .qr-img { width: 220px; height: auto; border-radius: 10px; margin: 10px 0; }
        
        .btn-pay { background: var(--fastpay); color: white; border: none; padding: 15px; width: 100%; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 18px; }
        .btn-wa { background: var(--success); color: white; border: none; padding: 15px; width: 100%; border-radius: 10px; font-weight: bold; cursor: pointer; margin-top: 10px; display: flex; align-items: center; justify-content: center; gap: 8px; }

        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    </style>
</head>
<body>

<div class="container">
    <h2 style="color: var(--primary);">Ú©Û†Ú¯Ø§ÛŒ Ø²Ø§Ù†Ø§ Ø¦Ø§Ø¯Û•Ù…</h2>
    
    <div class="search-box">
        <input type="text" id="partCode" placeholder="Ú©Û†Ø¯ÛŒ Ø´Ø§Ø´Û•ØŒ Ù¾Ø§ØªØ±ÛŒ ÛŒØ§Ù† Ú©Ø§ÚµØ§..." onkeypress="if(event.key==='Enter') addItem()">
        <button class="btn-add" onclick="addItem()">+ Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†</button>
    </div>

    <div id="receipt-area">
        <h3 style="margin:0;">Ù¾Ø³ÙˆÙˆÚµÛ•ÛŒ Ú©Ú•ÛŒÙ†</h3>
        <p style="font-size:12px; color:#666;">Ú•ÛÚ©Û•ÙˆØª: <span id="current-date"></span></p>
        <hr>
        <div id="cart-list">
            </div>
        <div class="total-box">Ú©Û†ÛŒ Ú¯Ø´ØªÛŒ: <span id="total-amount">0</span> $</div>
    </div>

    <button class="btn-pay" onclick="showFastPay()">ğŸ’³ Ù¾Ø§Ø±Û•Ø¯Ø§Ù† Ø¨Û• FastPay</button>

    <div id="fastpay-area" class="fastpay-card">
        <h4 style="color:var(--fastpay); margin:0;">Zana Adam - FastPay</h4>
        <img src="fastpay_qr.png" class="qr-img" alt="FastPay QR">
        <p style="font-size:13px; color:#555;">Ø¨Ú•ÛŒ Ù¾Ø§Ø±Û•Ú©Û• Ø³Ú©Ø§Ù† Ø¨Ú©Û• Ùˆ Ù¾Ø§Ø´Ø§Ù† ÙˆÛ•Ø³ÚµÛ•Ú©Û• Ø¨Ù†ÛØ±Û•</p>
        <button class="btn-wa" onclick="sendToWhatsApp()">
            <span>Ù†Ø§Ø±Ø¯Ù†ÛŒ ÙˆÛ•Ø³Úµ Ø¨Û† ÙˆØ§ØªØ³Ø¦Ø§Ù¾</span>
        </button>
    </div>
</div>

<script>
    // Ù„ÛŒØ³ØªÛŒ Ú©Ø§ÚµØ§Ú©Ø§Ù†Øª
    const inventory = {
        "S13": { name: "Ø´Ø§Ø´Û• iPhone 13 Pro", price: 165 },
        "B12": { name: "Ù¾Ø§ØªØ±ÛŒ iPhone 12 Mini", price: 35 },
        "H": { name: "Ù‡ÛØ±Ù…Ø§Ù† White Oats", price: 10 } // Ø¨Û† Ú©Ø§ÚµØ§ÛŒ Ù‡ÛØ±Ù…Ø§Ù†
    };

    let cart = [];
    document.getElementById('current-date').innerText = new Date().toLocaleString('ku-IQ');

    function addItem() {
        const code = document.getElementById('partCode').value.toUpperCase();
        const item = inventory[code];
        if (item) {
            cart.push(item);
            updateUI();
            document.getElementById('partCode').value = "";
            document.getElementById('fastpay-area').style.display = 'none';
        } else {
            alert("Ú©Û†Ø¯Û•Ú©Û• Ù‡Û•ÚµÛ•ÛŒÛ• ÛŒØ§Ù† Ù„Û• Ú©Û†Ú¯Ø§ Ù†ÛŒÛŒÛ•!");
        }
    }

    function updateUI() {
        const list = document.getElementById('cart-list');
        list.innerHTML = "";
        let total = 0;
        cart.forEach((item, index) => {
            total += item.price;
            list.innerHTML += `
                <div class="item-row">
                    <span>${item.name}</span>
                    <span><b>${item.price} $</b></span>
                </div>`;
        });
        document.getElementById('total-amount').innerText = total;
    }

    function showFastPay() {
        if (cart.length === 0) return alert("Ø³Û•Ø¨Û•ØªÛ•Ú©Û• Ø®Ø§ÚµÛŒÛŒÛ•!");
        document.getElementById('fastpay-area').style.display = 'block';
    }

    async function sendToWhatsApp() {
        // Ù¡. Ø¯Ø±ÙˆØ³ØªÚ©Ø±Ø¯Ù† Ùˆ Ø¯Ø§Ú¯Ø±ØªÙ†ÛŒ PDF
        const element = document.getElementById('receipt-area');
        const opt = { margin: 1, filename: 'Zana-Receipt.pdf', image: { type: 'jpeg', quality: 0.98 }, html2canvas: { scale: 2 }, jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' } };
        html2pdf().set(opt).from(element).save();

        // Ù¢. Ù†Ø§Ø±Ø¯Ù†ÛŒ ÙˆØ±Ø¯Û•Ú©Ø§Ø±ÛŒ Ø¨Û† ÙˆØ§ØªØ³Ø¦Ø§Ù¾ÛŒ ØªÛ†
        const myNumber = "9647758887488"; // Ú˜Ù…Ø§Ø±Û•ÛŒ Ø®Û†Øª Ù„ÛØ±Û• Ø¨Ù†ÙˆÙˆØ³Û• Ø¨Û• ÙÛ†Ø±Ù…Ø§ØªÛŒ Ù†ÛÙˆØ¯Û•ÙˆÚµÛ•ØªÛŒ
        let message = `*Ø³ÚµØ§Ùˆ Ú©Ø§Ú© Ø²Ø§Ù†Ø§ØŒ Ù…Ù† Ù¾Ø§Ø±Û•Ù… Ø¯Ø§ÙˆÛ• Ø¨Û• ÙØ§Ø³ØªÙ¾Û•ÛŒ*%0A`;
        message += `*ÙˆØ±Ø¯Û•Ú©Ø§Ø±ÛŒ Ú©Ú•ÛŒÙ†:*%0A`;
        cart.forEach(item => message += `- ${item.name}: ${item.price}$%0A`);
        message += `%0A*Ú©Û†ÛŒ Ú¯Ø´ØªÛŒ: ${document.getElementById('total-amount').innerText}$*`;
        
        window.open(`https://wa.me/${myNumber}?text=${message}`, '_blank');
    }
</script>

</body>
</html>
