<!DOCTYPE html>
<html dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³ÛŒØ³ØªÛ•Ù…ÛŒ ÙØ±Û†Ø´ØªÙ†ÛŒ Ø²Ø§Ù†Ø§ Ø¦Ø§Ø¯Û•Ù…</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        :root { --primary: #3182ce; --fastpay: #e31e24; --success: #25D366; --bg: #f7fafc; }
        body { font-family: sans-serif; background: var(--bg); padding: 10px; text-align: center; color: #2d3748; }
        .container { max-width: 500px; margin: auto; background: white; padding: 20px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        
        .input-group { margin-bottom: 20px; display: flex; flex-direction: column; gap: 10px; }
        input { padding: 12px; border: 2px solid #e2e8f0; border-radius: 10px; font-size: 16px; outline: none; }
        input:focus { border-color: var(--primary); }
        .btn-add { background: var(--primary); color: white; border: none; padding: 12px; border-radius: 10px; cursor: pointer; font-weight: bold; }

        #receipt-area { padding: 15px; border: 2px solid #edf2f7; border-radius: 12px; background: #fff; margin-top: 10px; }
        .item-row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #f0f0f0; }
        .total-box { font-size: 26px; font-weight: bold; color: var(--fastpay); margin-top: 15px; padding: 10px; background: #fff5f5; border-radius: 10px; }

        .payment-section { display: none; margin-top: 20px; padding: 15px; border: 2px solid var(--fastpay); border-radius: 15px; background: #fff; animation: fadeIn 0.5s; }
        .qr-img { width: 100%; max-width: 250px; border-radius: 10px; margin: 10px 0; }
        .upload-area { background: #f8fafc; border: 2px dashed #cbd5e0; padding: 15px; border-radius: 10px; margin-top: 10px; }
        
        .btn-pay { background: var(--fastpay); color: white; border: none; padding: 15px; width: 100%; border-radius: 12px; font-weight: bold; cursor: pointer; font-size: 18px; margin-top: 10px; }
        .btn-wa { background: var(--success); color: white; border: none; padding: 15px; width: 100%; border-radius: 12px; font-weight: bold; cursor: pointer; margin-top: 10px; display: none; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="container">
    <h2 style="color: var(--primary); margin-bottom: 5px;">Ú©Û†Ú¯Ø§ÛŒ Ø²Ø§Ù†Ø§ Ø¦Ø§Ø¯Û•Ù…</h2>
    <p style="font-size: 14px; color: #718096; margin-bottom: 20px;">Ø³ÛŒØ³ØªÛ•Ù…ÛŒ ÙØ±Û†Ø´ØªÙ†ÛŒ Ø´Ø§Ø´Û• Ùˆ Ù¾Ø§ØªØ±ÛŒ</p>

    <div class="input-group">
        <input type="text" id="custName" placeholder="Ù†Ø§ÙˆÛŒ Ú©Ú•ÛŒØ§Ø± Ø¨Ù†ÙˆÙˆØ³Û• (Ù†Ø§Ú†Ø§Ø±ÛŒ)...">
        <div style="display: flex; gap: 5px;">
            <input type="text" id="partCode" placeholder="Ú©Û†Ø¯ÛŒ Ù¾Ø§Ø±Ú†Û•..." style="flex:1;">
            <button class="btn-add" onclick="addItem()">+ Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†</button>
        </div>
    </div>

    <div id="receipt-area">
        <h3 style="margin:0;">ÙˆÛ•Ø³ÚµÛŒ ÙÛ•Ø±Ù…ÛŒ</h3>
        <p style="font-size:12px; color:#666;">Ú©Ú•ÛŒØ§Ø±: <span id="display-name">---</span></p>
        <hr style="border:0; border-top:1px solid #eee;">
        <div id="cart-list"></div>
        <div class="total-box">Ú©Û†ÛŒ Ú¯Ø´ØªÛŒ: <span id="total-amount">0</span> $</div>
    </div>

    <button id="checkout-btn" class="btn-pay" onclick="startCheckout()">ğŸ’³ Ù¾Ø§Ø±Û•Ø¯Ø§Ù† Ø¨Û• ÙØ§Ø³ØªÙ¾Û•ÛŒ</button>

    <div id="payment-box" class="payment-section">
        <h4 style="color:var(--fastpay); margin:0;">Zana Adam - FastPay</h4>
        <img src="fastpay_qr.png" class="qr-img" alt="FastPay QR">
        
        <div class="upload-area">
            <p style="margin:0; font-size:14px;">Ø³Ú©Ø±ÛŒÙ†â€ŒØ´Û†ØªÛŒ Ù†Ø§Ø±Ø¯Ù†ÛŒ Ù¾Ø§Ø±Û•Ú©Û• Ù„ÛØ±Û• Ø¯Ø§Ø¨Ù†Û:</p>
            <input type="file" id="screenshot" accept="image/*" onchange="showWhatsAppBtn()">
        </div>

        <button id="wa-btn" class="btn-wa" onclick="generateAndSend()">âœ… Ù†Ø§Ø±Ø¯Ù†ÛŒ ÙˆÛ•Ø³Úµ Ùˆ Ø³Ú©Ø±ÛŒÙ† Ø¨Û† ÙˆØ§ØªØ³Ø¦Ø§Ù¾</button>
    </div>
</div>

<script>
    // Ù„ÛŒØ³ØªÛŒ Ù¾Ø§Ø±Ú†Û•Ú©Ø§Ù†
    const inventory = {
        "S13": { name: "Ø´Ø§Ø´Û• iPhone 13 Pro", price: 165 },
        "S14": { name: "Ø´Ø§Ø´Û• iPhone 14 Pro Max", price: 210 },
        "B12": { name: "Ù¾Ø§ØªØ±ÛŒ iPhone 12 Mini", price: 35 },
        "B13": { name: "Ù¾Ø§ØªØ±ÛŒ iPhone 13", price: 45 },
        "H": { name: "Ù‡ÛØ±Ù…Ø§Ù† Oats", price: 10 } // Ø¨Û† Ú©Ø§ÚµØ§ÛŒ Ù‡ÛØ±Ù…Ø§Ù†
    };

    let cart = [];

    function addItem() {
        const name = document.getElementById('custName').value;
        if(!name) { alert("ØªÚ©Ø§ÛŒÛ• Ø³Û•Ø±Û•ØªØ§ Ù†Ø§ÙˆÛŒ Ú©Ú•ÛŒØ§Ø± Ø¨Ù†ÙˆÙˆØ³Û•!"); return; }
        
        const code = document.getElementById('partCode').value.toUpperCase();
        const item = inventory[code];

        if (item) {
            cart.push(item);
            document.getElementById('display-name').innerText = name;
            updateUI();
            document.getElementById('partCode').value = "";
            document.getElementById('payment-box').style.display = 'none';
            document.getElementById('checkout-btn').style.display = 'block';
        } else {
            alert("Ø¦Û•Ù… Ú©Û†Ø¯Û• Ø¨ÙˆÙˆÙ†ÛŒ Ù†ÛŒÛŒÛ•!");
        }
    }

    function updateUI() {
        const list = document.getElementById('cart-list');
        list.innerHTML = "";
        let total = 0;
        cart.forEach(item => {
            total += item.price;
            list.innerHTML += `<div class="item-row"><span>${item.name}</span><span><b>${item.price} $</b></span></div>`;
        });
        document.getElementById('total-amount').innerText = total;
    }

    function startCheckout() {
        if(cart.length === 0) return alert("Ø³Û•Ø¨Û•ØªÛ•Ú©Û• Ø®Ø§ÚµÛŒÛŒÛ•!");
        document.getElementById('payment-box').style.display = 'block';
        document.getElementById('checkout-btn').style.display = 'none';
    }

    function showWhatsAppBtn() {
        document.getElementById('wa-btn').style.display = 'block';
    }

    async function generateAndSend() {
        // Ù¡. Ø¯Ø±ÙˆØ³ØªÚ©Ø±Ø¯Ù†ÛŒ PDF
        const element = document.getElementById('receipt-area');
        const opt = { margin: 1, filename: 'Zana-Receipt.pdf', html2canvas: { scale: 2 }, jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' } };
        html2pdf().set(opt).from(element).save();

        // Ù¢. Ø¦Ø§Ù…Ø§Ø¯Û•Ú©Ø±Ø¯Ù†ÛŒ Ù†Ø§Ù…Û•ÛŒ ÙˆØ§ØªØ³Ø¦Ø§Ù¾
        const myNumber = "964750XXXXXXX"; // Ú˜Ù…Ø§Ø±Û•ÛŒ Ø®Û†Øª Ù„ÛØ±Û• Ø¨Ù†ÙˆÙˆØ³Û•
        const buyer = document.getElementById('custName').value;
        let msg = `*Ø³ÚµØ§Ùˆ Ú©Ø§Ú© Ø²Ø§Ù†Ø§ØŒ Ù…Ù† ${buyer} Ù¾Ø§Ø±Û•Ù… Ù†Ø§Ø±Ø¯ÙˆÙˆÛ•*%0A`;
        msg += `*Ú©Û†ÛŒ Ú¯Ø´ØªÛŒ: ${document.getElementById('total-amount').innerText}$*%0A%0A`;
        msg += `ØªÚ©Ø§ÛŒÛ• Ø³Ú©Ø±ÛŒÙ†â€ŒØ´Û†ØªÛŒ Ù¾Ø§Ø±Û• Ù†Ø§Ø±Ø¯Ù†Û•Ú©Û• Ù„Û•Ú¯Û•Úµ Ø¦Û•Ù… ÙˆÛ•Ø³ÚµÛ• ÙˆÛ•Ø±Ú¯Ø±Û•.`;

        window.open(`https://wa.me/${myNumber}?text=${msg}`, '_blank');
    }
</script>

</body>
</html>
