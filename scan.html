<!DOCTYPE html>
<html dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³ÛŒØ³ØªÛ•Ù…ÛŒ ÙØ±Û†Ø´ØªÙ†ÛŒ Ø²Ø§Ù†Ø§ + FastPay</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        :root { --primary: #3182ce; --fastpay: #e31e24; --bg: #f7fafc; }
        body { font-family: sans-serif; background: var(--bg); padding: 10px; text-align: center; }
        .container { max-width: 500px; margin: auto; background: white; padding: 20px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .search-box { display: flex; gap: 5px; margin-bottom: 20px; }
        input { flex: 1; padding: 12px; border: 2px solid #ddd; border-radius: 8px; }
        #receipt-area { padding: 15px; border: 1px solid #eee; background: #fff; margin-bottom: 15px; }
        .item-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f0f0f0; }
        .fastpay-section { display: none; margin-top: 20px; padding: 15px; border: 2px solid var(--fastpay); border-radius: 10px; }
        .fastpay-qr { width: 200px; height: auto; border-radius: 10px; margin-top: 10px; }
        .btn-pay { background: var(--fastpay); color: white; border: none; padding: 15px; width: 100%; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 16px; }
        .btn-whatsapp { background: #25D366; color: white; border: none; padding: 12px; width: 100%; border-radius: 10px; font-weight: bold; cursor: pointer; margin-top: 10px; }
    </style>
</head>
<body>

<div class="container">
    <h2>Ú©Û†Ú¯Ø§ÛŒ Ø²Ø§Ù†Ø§</h2>
    
    <div class="search-box">
        <input type="text" id="partCode" placeholder="Ú©Û†Ø¯ÛŒ Ø´Ø§Ø´Û• ÛŒØ§Ù† Ù¾Ø§ØªØ±ÛŒ...">
        <button onclick="addItem()" style="padding:10px; background:var(--primary); color:white; border:none; border-radius:8px;">+ Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†</button>
    </div>

    <div id="receipt-area">
        <h3 style="margin:0;">Ù¾Ø³ÙˆÙˆÚµÛ•ÛŒ Ú©Ú•ÛŒÙ†</h3>
        <p style="font-size:12px; color:#666;">Ú©Ú•ÛŒØ§Ø±: Zana Adam</p>
        <hr>
        <div id="cart-list"></div>
        <hr>
        <div style="font-size:22px; font-weight:bold; color:var(--fastpay);">
            Ú©Û†ÛŒ Ú¯Ø´ØªÛŒ: <span id="total-amount">0</span> $
        </div>
    </div>

    <button class="btn-pay" onclick="showFastPay()">ğŸ’³ Ù¾Ø§Ø±Û•Ø¯Ø§Ù† Ø¨Û• FastPay</button>

    <div id="fastpay-area" class="fastpay-section">
        <h4 style="color:var(--fastpay); margin:0;">FastPay QR Code</h4>
        <img src="fastpay_qr.png" class="fastpay-qr" alt="FastPay Zana Adam">
        <p style="font-size:13px;">Ø¯ÙˆØ§ÛŒ Ø³Ú©Ø§Ù†Ú©Ø±Ø¯Ù†ØŒ Ø¯ÙˆÚ¯Ù…Û•ÛŒ Ø®ÙˆØ§Ø±Û•ÙˆÛ• Ø¯Ø§Ø¨Ú¯Ø±Û•</p>
        <button class="btn-whatsapp" onclick="sendToWhatsApp()">âœ… Ù†Ø§Ø±Ø¯Ù†ÛŒ ÙˆÛ•Ø³Úµ Ø¨Û† ÙˆØ§ØªØ³Ø¦Ø§Ù¾</button>
    </div>
</div>

<script>
    const inventory = {
        "S13": { name: "Ø´Ø§Ø´Û• iPhone 13 Pro", price: 165 },
        "B12": { name: "Ù¾Ø§ØªØ±ÛŒ iPhone 12", price: 35 },
        "H": { name: "Ù‡ÛØ±Ù…Ø§Ù† White Oats", price: 10 }
    };

    let cart = [];

    function addItem() {
        const code = document.getElementById('partCode').value.toUpperCase();
        const item = inventory[code];
        if (item) {
            cart.push(item);
            updateUI();
            document.getElementById('partCode').value = "";
        } else {
            alert("Ú©Û†Ø¯Û•Ú©Û• Ù‡Û•ÚµÛ•ÛŒÛ•!");
        }
    }

    function updateUI() {
        const list = document.getElementById('cart-list');
        list.innerHTML = "";
        let total = 0;
        cart.forEach((item) => {
            total += item.price;
            list.innerHTML += `<div class="item-row"><span>${item.name}</span><span>${item.price} $</span></div>`;
        });
        document.getElementById('total-amount').innerText = total;
    }

    function showFastPay() {
        if (cart.length === 0) return alert("Ø³Û•Ø¨Û•ØªÛ•Ú©Û• Ø®Ø§ÚµÛŒÛŒÛ•!");
        document.getElementById('fastpay-area').style.display = 'block';
    }

    async function sendToWhatsApp() {
        const element = document.getElementById('receipt-area');
        const opt = { margin: 1, filename: 'Zana-Receipt.pdf', image: { type: 'jpeg', quality: 0.98 }, html2canvas: { scale: 2 }, jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' } };
        
        // Ø¯Ø±ÙˆØ³ØªÚ©Ø±Ø¯Ù†ÛŒ PDF
        html2pdf().set(opt).from(element).save();

        // Ù†Ø§Ø±Ø¯Ù†ÛŒ Ù†Ø§Ù…Û•
        const myNumber = "9647501234567"; // Ú˜Ù…Ø§Ø±Û•ÛŒ Ø®Û†Øª Ù„ÛØ±Û• Ø¨Ù†ÙˆÙˆØ³Û•
        let message = `Ø³ÚµØ§Ùˆ Ú©Ø§Ú© Ø²Ø§Ù†Ø§ØŒ Ù…Ù† Ù¾Ø§Ø±Û•Ù… Ø¨Û• ÙØ§Ø³ØªÙ¾Û•ÛŒ Ø¯Ø§ÙˆÛ•.%0A*Ú©Û†ÛŒ Ú¯Ø´ØªÛŒ: ${document.getElementById('total-amount').innerText}$*`;
        window.open(`https://wa.me/${myNumber}?text=${message}`, '_blank');
    }
</script>

</body>
</html>
